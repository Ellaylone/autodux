{"version":3,"file":"index.browser.js","sources":["../source/index.js"],"sourcesContent":["const curry = require('lodash.curry');\n\nconst sliceSelector = curry((slice, fn, state) => fn(state[slice]));\n\nconst autodux = ({\n  initial = '',\n  actions = {},\n  selectors = {},\n  slice = ''\n} = {}) => {\n  const reducer = (state = initial, {type, payload} = {}) => {\n    const [ namespace, subType ] = type ?\n    type.split('/') :\n    'unknown/unknown'.split('/');\n\n    return (namespace === slice && actions[subType]) ?\n      actions[subType].reducer(state, payload) :\n      state\n    ;\n  };\n\n  const createSelector = sliceSelector(slice);\n\n  const slicedSelectors = Object.keys(selectors).reduce(\n    (obj, selector) => slice ?\n      Object.assign(obj, {[selector]: createSelector(selectors[selector]) }) :\n      Object.assign(obj, {[selector]: selectors[selector] }),\n    {}\n  );\n\n  const mappedActions = Object.keys(actions).reduce(\n    (obj, key) => Object.assign({}, obj, {\n      [key]: Object.assign(\n        (...args) => ({\n          type: `${ slice }/${ key }`,\n          payload: typeof actions[key].create === 'function' ?\n            actions[key].create(...args) :\n            undefined\n        }),\n        { type: `${ slice }/${ key }` }\n      )\n    }),\n    {}\n  );\n\n  return {\n    initial, actions: mappedActions, selectors: slicedSelectors, reducer\n  };\n};\n\nmodule.exports = autodux;\n"],"names":["curry","require","sliceSelector","slice","fn","state","autodux","initial","actions","selectors","reducer","type","payload","split","namespace","subType","createSelector","slicedSelectors","Object","keys","reduce","obj","selector","assign","mappedActions","key","create","undefined","module","exports"],"mappings":";AAAA,IAAMA,QAAQC,QAAQ,cAAR,CAAd;;AAEA,IAAMC,gBAAgBF,MAAM,UAACG,KAAD,EAAQC,EAAR,EAAYC,KAAZ;SAAsBD,GAAGC,MAAMF,KAAN,CAAH,CAAtB;CAAN,CAAtB;;AAEA,IAAMG,UAAU,SAAVA,OAAU,GAKL;iFAAP,EAAO;0BAJTC,OAIS;MAJTA,OAIS,gCAJC,EAID;0BAHTC,OAGS;MAHTA,OAGS,gCAHC,EAGD;4BAFTC,SAES;MAFTA,SAES,kCAFG,EAEH;wBADTN,KACS;MADTA,KACS,8BADD,EACC;;MACHO,UAAU,SAAVA,OAAU,GAA2C;QAA1CL,KAA0C,uEAAlCE,OAAkC;;oFAAP,EAAO;QAAxBI,IAAwB,SAAxBA,IAAwB;QAAlBC,OAAkB,SAAlBA,OAAkB;;gBAC1BD,OAC/BA,KAAKE,KAAL,CAAW,GAAX,CAD+B,GAE/B,kBAAkBA,KAAlB,CAAwB,GAAxB,CAHyD;QACjDC,SADiD;QACtCC,OADsC;;WAKjDD,cAAcX,KAAd,IAAuBK,QAAQO,OAAR,CAAxB,GACLP,QAAQO,OAAR,EAAiBL,OAAjB,CAAyBL,KAAzB,EAAgCO,OAAhC,CADK,GAELP,KAFF;GALF;;MAWMW,iBAAiBd,cAAcC,KAAd,CAAvB;;MAEMc,kBAAkBC,OAAOC,IAAP,CAAYV,SAAZ,EAAuBW,MAAvB,CACtB,UAACC,GAAD,EAAMC,QAAN;;;WAAmBnB,QACjBe,OAAOK,MAAP,CAAcF,GAAd,uCAAqBC,QAArB,IAAgCN,eAAeP,UAAUa,QAAV,CAAf,CAAhC,kBADiB,GAEjBJ,OAAOK,MAAP,CAAcF,GAAd,yCAAqBC,QAArB,IAAgCb,UAAUa,QAAV,CAAhC,mBAFF;GADsB,EAItB,EAJsB,CAAxB;;MAOME,gBAAgBN,OAAOC,IAAP,CAAYX,OAAZ,EAAqBY,MAArB,CACpB,UAACC,GAAD,EAAMI,GAAN;;;WAAcP,OAAOK,MAAP,CAAc,EAAd,EAAkBF,GAAlB,yCACXI,GADW,IACLP,OAAOK,MAAP,CACL;;;aAAc;cACFpB,KAAV,SAAqBsB,GADT;iBAEH,OAAOjB,QAAQiB,GAAR,EAAaC,MAApB,KAA+B,UAA/B,GACP,wBAAQD,GAAR,GAAaC,MAAb,+BADO,GAEPC;OAJJ;KADK,EAOL,EAAEhB,MAAUR,KAAV,SAAqBsB,GAAvB,EAPK,CADK,mBAAd;GADoB,EAYpB,EAZoB,CAAtB;;SAeO;oBAAA,EACIjB,SAASgB,aADb,EAC4Bf,WAAWQ,eADvC,EACwDP;GAD/D;CAzCF;;AA8CAkB,OAAOC,OAAP,GAAiBvB,OAAjB"}